{"version":3,"file":"BaseComponent.js","sourceRoot":"","sources":["../../../src/base/BaseComponent.ts"],"names":[],"mappings":"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","sourcesContent":["// Base Component for RubyEvents Embed Components\n\nimport { LitElement, html, css, TemplateResult } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { ApiClient, getApiClient } from '../utils/api.js';\nimport type { LoadingState } from '../types/api.js';\nimport {\n  baseStyles,\n  loadingStyles,\n  errorStyles,\n  footerStyles,\n} from './styles.js';\n\nexport abstract class BaseComponent<T> extends LitElement {\n  static styles = [baseStyles, loadingStyles, errorStyles, footerStyles];\n\n  /**\n   * Base URL for the RubyEvents API.\n   * Defaults to https://rubyevents.org\n   */\n  @property({ type: String, attribute: 'base-url' })\n  baseUrl = 'https://rubyevents.org';\n\n  /**\n   * Whether to show the \"Powered by RubyEvents\" footer.\n   * Add the `show-footer` attribute to display the footer.\n   */\n  @property({ type: Boolean, attribute: 'show-footer' })\n  showFooter = false;\n\n  @state()\n  protected loadingState: LoadingState = 'idle';\n\n  @state()\n  protected data: T | null = null;\n\n  @state()\n  protected error: string | null = null;\n\n  protected api: ApiClient | null = null;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.api = getApiClient(this.baseUrl);\n  }\n\n  updated(changedProperties: Map<string, unknown>) {\n    super.updated(changedProperties);\n\n    // Refetch data if baseUrl changes\n    if (changedProperties.has('baseUrl') && this.api) {\n      this.api = getApiClient(this.baseUrl);\n      this.fetchData();\n    }\n  }\n\n  protected abstract fetchData(): Promise<void>;\n\n  protected abstract renderContent(): TemplateResult;\n\n  protected renderLoading(): TemplateResult {\n    return html`\n      <div class=\"loading\">\n        <div class=\"loading-spinner\"></div>\n      </div>\n    `;\n  }\n\n  protected renderError(): TemplateResult {\n    return html`\n      <div class=\"error\">\n        <div class=\"error-icon\">!</div>\n        <p class=\"error-message\">${this.error || 'Something went wrong'}</p>\n      </div>\n    `;\n  }\n\n  protected renderFooter(): TemplateResult {\n    if (!this.showFooter) {\n      return html``;\n    }\n    return html`\n      <div class=\"powered-by\">\n        Powered by\n        <a href=\"${this.baseUrl}\" target=\"_blank\" rel=\"noopener noreferrer\"\n          >RubyEvents.org</a\n        >\n      </div>\n    `;\n  }\n\n  protected formatDuration(seconds: number): string {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  }\n\n  protected formatDate(dateString: string): string {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n      });\n    } catch {\n      return dateString;\n    }\n  }\n\n  protected buildUrl(path: string): string {\n    return `${this.baseUrl}${path}`;\n  }\n\n  render() {\n    switch (this.loadingState) {\n      case 'loading':\n        return this.renderLoading();\n      case 'error':\n        return this.renderError();\n      case 'success':\n        return this.renderContent();\n      default:\n        return html``;\n    }\n  }\n}\n\n// Skeleton components for loading states\nexport const skeletonCard = css`\n  .skeleton-card {\n    padding: 1rem;\n  }\n\n  .skeleton-card .skeleton-thumbnail {\n    margin-bottom: 0.75rem;\n  }\n\n  .skeleton-card .skeleton-text {\n    height: 1rem;\n    margin-bottom: 0.5rem;\n  }\n\n  .skeleton-card .skeleton-text:last-child {\n    width: 60%;\n  }\n`;\n"]}