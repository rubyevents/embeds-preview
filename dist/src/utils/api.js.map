{"version":3,"file":"api.js","sourceRoot":"","sources":["../../../src/utils/api.ts"],"names":[],"mappings":"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","sourcesContent":["// API Client for RubyEvents Embed Components\n\nconst DEFAULT_BASE_URL = 'https://rubyevents.org';\n\nexport class ApiClient {\n  private baseUrl: string;\n\n  constructor(baseUrl: string = DEFAULT_BASE_URL) {\n    this.baseUrl = baseUrl.replace(/\\/$/, ''); // Remove trailing slash\n  }\n\n  private async fetch<T>(endpoint: string): Promise<T> {\n    const url = `${this.baseUrl}/api/v1/embed${endpoint}`;\n\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        throw new Error('Not found');\n      }\n      throw new Error(`API error: ${response.status}`);\n    }\n\n    return response.json();\n  }\n\n  async getTalk(slug: string) {\n    return this.fetch<import('../types/api.js').Talk>(`/talks/${encodeURIComponent(slug)}`);\n  }\n\n  async getSpeaker(slug: string) {\n    return this.fetch<import('../types/api.js').SpeakerDetail>(\n      `/speakers/${encodeURIComponent(slug)}`\n    );\n  }\n\n  async getProfile(slug: string) {\n    return this.fetch<import('../types/api.js').Profile>(\n      `/profiles/${encodeURIComponent(slug)}`\n    );\n  }\n\n  async getEvents(filter?: string) {\n    const params = filter ? `?filter=${encodeURIComponent(filter)}` : '';\n    return this.fetch<import('../types/api.js').EventsResponse>(`/events${params}`);\n  }\n\n  async getEvent(slug: string) {\n    return this.fetch<import('../types/api.js').EventDetail>(\n      `/events/${encodeURIComponent(slug)}`\n    );\n  }\n\n  async getParticipants(eventSlug: string) {\n    return this.fetch<import('../types/api.js').ParticipantsResponse>(\n      `/events/${encodeURIComponent(eventSlug)}/participants`\n    );\n  }\n\n  async getStickers(userSlug: string) {\n    return this.fetch<import('../types/api.js').StickersResponse>(\n      `/stickers/${encodeURIComponent(userSlug)}`\n    );\n  }\n\n  async getStamps(userSlug: string) {\n    return this.fetch<import('../types/api.js').StampsResponse>(\n      `/stamps/${encodeURIComponent(userSlug)}`\n    );\n  }\n\n  async getTopic(slug: string) {\n    return this.fetch<import('../types/api.js').TopicResponse>(\n      `/topics/${encodeURIComponent(slug)}`\n    );\n  }\n}\n\n// Singleton instance with default base URL\nlet defaultClient: ApiClient | null = null;\n\nexport function getApiClient(baseUrl?: string): ApiClient {\n  if (baseUrl) {\n    return new ApiClient(baseUrl);\n  }\n  if (!defaultClient) {\n    defaultClient = new ApiClient();\n  }\n  return defaultClient;\n}\n"]}