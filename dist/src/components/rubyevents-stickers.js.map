{"version":3,"file":"rubyevents-stickers.js","sourceRoot":"","sources":["../../../src/components/rubyevents-stickers.ts"],"names":[],"mappings":"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","sourcesContent":["// RubyEvents Stickers Component\n// Displays stickers on a MacBook-style laptop lid with random placement\n\nimport { html, css, TemplateResult } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { BaseComponent } from '../base/BaseComponent.js';\nimport { footerStyles } from '../base/styles.js';\nimport type { StickersResponse, Sticker } from '../types/api.js';\n\ninterface PlacedSticker extends Sticker {\n  x: number;\n  y: number;\n  rotation: number;\n  scale: number;\n  zIndex: number;\n}\n\n@customElement('rubyevents-stickers')\nexport class RubyeventsStickers extends BaseComponent<StickersResponse> {\n  static styles = [\n    ...BaseComponent.styles,\n    footerStyles,\n    css`\n      .stickers-container {\n        max-width: 600px;\n        margin: 0 auto;\n      }\n\n      .stickers-header {\n        text-align: center;\n        margin-bottom: 1rem;\n      }\n\n      .stickers-title {\n        margin: 0 0 0.25rem 0;\n        font-size: 1.125rem;\n        font-weight: 600;\n      }\n\n      .stickers-subtitle {\n        margin: 0;\n        font-size: 0.875rem;\n        color: var(--rubyevents-text-muted);\n      }\n\n      .macbook {\n        position: relative;\n        width: 100%;\n        max-width: 500px;\n        margin: 0 auto;\n      }\n\n      .macbook-lid {\n        position: relative;\n        aspect-ratio: 16 / 10;\n        background: linear-gradient(145deg, #2d2d2d 0%, #1a1a1a 100%);\n        border-radius: 16px 16px 0 0;\n        box-shadow:\n          inset 0 0 0 2px #3a3a3a,\n          inset 0 0 20px rgba(0, 0, 0, 0.5),\n          0 -2px 10px rgba(0, 0, 0, 0.3);\n        overflow: hidden;\n      }\n\n      .macbook-lid::before {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 50px;\n        height: 60px;\n        background: linear-gradient(145deg, #4a4a4a 0%, #3a3a3a 100%);\n        border-radius: 8px;\n        opacity: 0.3;\n      }\n\n      .macbook-lid::after {\n        content: '';\n        position: absolute;\n        inset: 0;\n        background: linear-gradient(\n          135deg,\n          rgba(255, 255, 255, 0.05) 0%,\n          transparent 50%,\n          rgba(0, 0, 0, 0.1) 100%\n        );\n        pointer-events: none;\n      }\n\n      .stickers-area {\n        position: absolute;\n        /* Extra padding to account for hover scale effect */\n        inset: 30px;\n      }\n\n      .sticker {\n        position: absolute;\n        cursor: pointer;\n        transition: filter 0.2s ease, z-index 0s;\n        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.4));\n      }\n\n      .sticker:hover {\n        filter: drop-shadow(3px 3px 8px rgba(0, 0, 0, 0.5)) brightness(1.05);\n        z-index: 100 !important;\n      }\n\n      .sticker-inner {\n        width: 100%;\n        height: 100%;\n        transition: transform 0.15s ease;\n      }\n\n      .sticker:hover .sticker-inner {\n        transform: scale(1.08);\n      }\n\n      .sticker img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n        pointer-events: none;\n      }\n\n      .macbook-base {\n        height: 12px;\n        background: linear-gradient(to bottom, #3a3a3a 0%, #2a2a2a 100%);\n        border-radius: 0 0 4px 4px;\n        box-shadow:\n          0 2px 8px rgba(0, 0, 0, 0.3),\n          inset 0 1px 0 rgba(255, 255, 255, 0.1);\n      }\n\n      .macbook-notch {\n        position: absolute;\n        bottom: 0;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 80px;\n        height: 4px;\n        background: #1a1a1a;\n        border-radius: 0 0 4px 4px;\n      }\n\n      .empty-state {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        min-height: 150px;\n        color: rgba(255, 255, 255, 0.4);\n        text-align: center;\n        padding: 2rem;\n      }\n\n      .empty-state-icon {\n        font-size: 2rem;\n        margin-bottom: 0.5rem;\n      }\n\n      .empty-state-text {\n        font-size: 0.875rem;\n      }\n\n      /* Loading skeleton */\n      .skeleton-lid {\n        position: relative;\n        aspect-ratio: 16 / 10;\n        background: linear-gradient(\n          90deg,\n          var(--rubyevents-background-alt) 25%,\n          var(--rubyevents-border-color) 50%,\n          var(--rubyevents-background-alt) 75%\n        );\n        background-size: 200% 100%;\n        animation: shimmer 1.5s infinite;\n        border-radius: 16px 16px 0 0;\n      }\n\n      @keyframes shimmer {\n        0% {\n          background-position: 200% 0;\n        }\n        100% {\n          background-position: -200% 0;\n        }\n      }\n    `,\n  ];\n\n  /**\n   * The user slug to fetch stickers for\n   */\n  @property({ type: String })\n  slug = '';\n\n  /**\n   * Minimum sticker size in pixels\n   */\n  @property({ type: Number, attribute: 'min-size' })\n  minSize = 60;\n\n  /**\n   * Maximum sticker size in pixels\n   */\n  @property({ type: Number, attribute: 'max-size' })\n  maxSize = 100;\n\n  /**\n   * Seed for random placement (for consistent layouts)\n   */\n  @property({ type: Number })\n  seed = 0;\n\n  @state()\n  private placedStickers: PlacedSticker[] = [];\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.slug) {\n      this.fetchData();\n    }\n  }\n\n  updated(changedProperties: Map<string, unknown>) {\n    super.updated(changedProperties);\n    if (changedProperties.has('slug') || changedProperties.has('baseUrl')) {\n      this.fetchData();\n    }\n    if (\n      changedProperties.has('data') ||\n      changedProperties.has('minSize') ||\n      changedProperties.has('maxSize') ||\n      changedProperties.has('seed')\n    ) {\n      this.placeStickers();\n    }\n  }\n\n  protected async fetchData(): Promise<void> {\n    if (!this.slug || !this.api) return;\n\n    this.loadingState = 'loading';\n    this.error = null;\n\n    try {\n      this.data = await this.api.getStickers(this.slug);\n      this.loadingState = 'success';\n    } catch (err) {\n      this.error =\n        err instanceof Error ? err.message : 'Failed to load stickers';\n      this.loadingState = 'error';\n    }\n  }\n\n  private seededRandom(seed: number): () => number {\n    let s = seed || Date.now();\n    return () => {\n      s = (s * 1103515245 + 12345) & 0x7fffffff;\n      return s / 0x7fffffff;\n    };\n  }\n\n  private checkOverlap(\n    x: number,\n    y: number,\n    size: number,\n    placed: PlacedSticker[]\n  ): boolean {\n    // Calculate the radius as percentage of container (size is in pixels, container ~= 460px)\n    const radiusPercent = (size / 460) * 50; // Convert to percentage radius\n\n    for (const existing of placed) {\n      const existingRadius = (existing.scale * ((this.minSize + this.maxSize) / 2) / 460) * 50;\n      const minDistance = radiusPercent + existingRadius;\n\n      const dx = x - existing.x;\n      const dy = y - existing.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      if (distance < minDistance * 0.85) {\n        // Allow slight overlap (15%)\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private findNonOverlappingPosition(\n    size: number,\n    placed: PlacedSticker[],\n    random: () => number\n  ): { x: number; y: number; foundSpace: boolean } {\n    // Calculate padding based on sticker size to prevent cutoff\n    // Container is roughly 460px, sticker size is in pixels\n    const stickerRadiusPercent = (size / 460) * 50 + 2; // Extra 2% buffer\n    const minPadding = Math.max(12, stickerRadiusPercent);\n    const maxPadding = 100 - minPadding;\n\n    // Try grid-based positions first for better distribution\n    const gridSize = 10;\n    const gridPositions: Array<{ x: number; y: number }> = [];\n    const rangeX = maxPadding - minPadding;\n    const rangeY = maxPadding - minPadding;\n\n    for (let gx = 0; gx < gridSize; gx++) {\n      for (let gy = 0; gy < gridSize; gy++) {\n        const baseX = minPadding + (gx / (gridSize - 1)) * rangeX;\n        const baseY = minPadding + (gy / (gridSize - 1)) * rangeY;\n        // Add jitter but clamp to stay within bounds\n        const jitterX = (random() - 0.5) * 6;\n        const jitterY = (random() - 0.5) * 6;\n        gridPositions.push({\n          x: Math.max(minPadding, Math.min(maxPadding, baseX + jitterX)),\n          y: Math.max(minPadding, Math.min(maxPadding, baseY + jitterY)),\n        });\n      }\n    }\n\n    // Shuffle grid positions\n    for (let i = gridPositions.length - 1; i > 0; i--) {\n      const j = Math.floor(random() * (i + 1));\n      [gridPositions[i], gridPositions[j]] = [gridPositions[j], gridPositions[i]];\n    }\n\n    // Try grid positions first\n    for (const pos of gridPositions) {\n      if (!this.checkOverlap(pos.x, pos.y, size, placed)) {\n        return { x: pos.x, y: pos.y, foundSpace: true };\n      }\n    }\n\n    // If grid positions all overlap, try random positions\n    for (let attempt = 0; attempt < 50; attempt++) {\n      const x = minPadding + random() * rangeX;\n      const y = minPadding + random() * rangeY;\n\n      if (!this.checkOverlap(x, y, size, placed)) {\n        return { x, y, foundSpace: true };\n      }\n    }\n\n    // No non-overlapping position found, return a random position anyway\n    return {\n      x: minPadding + random() * rangeX,\n      y: minPadding + random() * rangeY,\n      foundSpace: false,\n    };\n  }\n\n  private placeStickers(): void {\n    if (!this.data?.stickers?.length) {\n      this.placedStickers = [];\n      return;\n    }\n\n    const random = this.seededRandom(this.seed || this.slug.length * 1000);\n    const placed: PlacedSticker[] = [];\n\n    // Sort stickers by size (larger first) for better packing\n    const stickersToPlace = [...this.data.stickers].map((sticker, index) => ({\n      sticker,\n      originalIndex: index,\n      scale: 0.8 + random() * 0.4, // 0.8 to 1.2\n    }));\n\n    // Place larger stickers first for better space utilization\n    stickersToPlace.sort((a, b) => b.scale - a.scale);\n\n    stickersToPlace.forEach(({ sticker, originalIndex, scale }) => {\n      const size = this.minSize + scale * (this.maxSize - this.minSize);\n      const rotation = (random() - 0.5) * 30; // -15 to +15 degrees\n\n      const { x, y } = this.findNonOverlappingPosition(size, placed, random);\n\n      placed.push({\n        ...sticker,\n        x,\n        y,\n        rotation,\n        scale,\n        zIndex: originalIndex + 1,\n      });\n    });\n\n    this.placedStickers = placed;\n  }\n\n  protected renderContent(): TemplateResult {\n    if (!this.data) {\n      return html``;\n    }\n\n    return html`\n      <div class=\"stickers-container\">\n        <div class=\"stickers-header\">\n          <h3 class=\"stickers-title\">${this.data.user.name}'s Stickers</h3>\n          <p class=\"stickers-subtitle\">${this.data.count} stickers collected</p>\n        </div>\n\n        <div class=\"macbook\">\n          <div class=\"macbook-lid\">\n            <div class=\"stickers-area\">\n              ${this.placedStickers.length > 0\n                ? this.placedStickers.map(sticker => this.renderSticker(sticker))\n                : html`\n                    <div class=\"empty-state\">\n                      <div class=\"empty-state-icon\">ðŸŽ¨</div>\n                      <div class=\"empty-state-text\">No stickers yet</div>\n                    </div>\n                  `}\n            </div>\n          </div>\n          <div class=\"macbook-base\">\n            <div class=\"macbook-notch\"></div>\n          </div>\n        </div>\n\n        ${this.showFooter\n          ? html`\n              <div class=\"powered-by\">\n                Powered by\n                <a\n                  href=\"${this.baseUrl}\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  RubyEvents.org\n                </a>\n              </div>\n            `\n          : ''}\n      </div>\n    `;\n  }\n\n  private renderSticker(sticker: PlacedSticker): TemplateResult {\n    const size = this.minSize + (this.maxSize - this.minSize) * sticker.scale;\n    const style = `\n      left: ${sticker.x}%;\n      top: ${sticker.y}%;\n      width: ${size}px;\n      height: ${size}px;\n      transform: translate(-50%, -50%) rotate(${sticker.rotation}deg);\n      z-index: ${sticker.zIndex};\n    `;\n\n    return html`\n      <div\n        class=\"sticker\"\n        style=${style}\n        title=\"${sticker.name}\"\n      >\n        <div class=\"sticker-inner\">\n          ${sticker.image_url\n            ? html`<img\n                src=\"${sticker.image_url}\"\n                alt=\"${sticker.name}\"\n                loading=\"lazy\"\n              />`\n            : html`<div style=\"width: 100%; height: 100%; background: #ccc; border-radius: 4px;\"></div>`}\n        </div>\n      </div>\n    `;\n  }\n\n  protected renderLoading(): TemplateResult {\n    return html`\n      <div class=\"stickers-container\">\n        <div class=\"stickers-header\">\n          <div class=\"skeleton skeleton-text\" style=\"width: 150px; margin: 0 auto;\"></div>\n          <div class=\"skeleton skeleton-text\" style=\"width: 100px; margin: 0.5rem auto 0;\"></div>\n        </div>\n        <div class=\"macbook\">\n          <div class=\"skeleton-lid\"></div>\n          <div class=\"macbook-base\">\n            <div class=\"macbook-notch\"></div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rubyevents-stickers': RubyeventsStickers;\n  }\n}\n"]}