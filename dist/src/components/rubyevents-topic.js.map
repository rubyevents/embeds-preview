{"version":3,"file":"rubyevents-topic.js","sourceRoot":"","sources":["../../../src/components/rubyevents-topic.ts"],"names":[],"mappings":"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","sourcesContent":["// RubyEvents Topic Component\n// Displays talks for a specific topic\n\nimport { html, css, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { BaseComponent } from '../base/BaseComponent.js';\nimport {\n  cardStyles,\n  thumbnailStyles,\n  avatarStyles,\n  badgeStyles,\n  listStyles,\n  utilityStyles,\n  footerStyles,\n} from '../base/styles.js';\nimport type { TopicResponse, TopicTalk } from '../types/api.js';\n\n@customElement('rubyevents-topic')\nexport class RubyeventsTopic extends BaseComponent<TopicResponse> {\n  static styles = [\n    ...BaseComponent.styles,\n    cardStyles,\n    thumbnailStyles,\n    avatarStyles,\n    badgeStyles,\n    listStyles,\n    utilityStyles,\n    footerStyles,\n    css`\n      .topic-container {\n        max-width: 500px;\n      }\n\n      .topic-header {\n        padding: 1rem;\n        border-bottom: 1px solid var(--rubyevents-border-color);\n      }\n\n      .topic-title {\n        margin: 0 0 0.25rem 0;\n        font-size: 1.25rem;\n        font-weight: 600;\n      }\n\n      .topic-title a {\n        color: inherit;\n        text-decoration: none;\n      }\n\n      .topic-title a:hover {\n        color: var(--rubyevents-primary-color);\n      }\n\n      .topic-meta {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        font-size: 0.875rem;\n        color: var(--rubyevents-text-muted);\n      }\n\n      .topic-description {\n        margin: 0.75rem 0 0 0;\n        font-size: 0.875rem;\n        color: var(--rubyevents-text-muted);\n        line-height: 1.5;\n      }\n\n      .tab-container {\n        padding: 1rem;\n      }\n\n      .talk-item {\n        display: flex;\n        gap: 0.75rem;\n        text-decoration: none;\n        color: inherit;\n      }\n\n      .talk-item:hover {\n        background: var(--rubyevents-background-alt);\n      }\n\n      .talk-thumbnail {\n        width: 80px;\n        aspect-ratio: 16 / 9;\n        border-radius: 4px;\n        object-fit: cover;\n        background: var(--rubyevents-background-alt);\n        flex-shrink: 0;\n      }\n\n      .view-all-card {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 1rem;\n        background: var(--rubyevents-background-alt);\n        border-radius: var(--rubyevents-border-radius);\n        color: var(--rubyevents-primary-color);\n        text-decoration: none;\n        font-size: 0.875rem;\n        font-weight: 500;\n        margin-top: 0.5rem;\n        transition: background-color 0.15s ease;\n      }\n\n      .view-all-card:hover {\n        background: var(--rubyevents-border-color);\n      }\n\n      .view-all-card svg {\n        width: 1rem;\n        height: 1rem;\n        margin-left: 0.25rem;\n      }\n\n      .empty-state {\n        text-align: center;\n        padding: 2rem;\n        color: var(--rubyevents-text-muted);\n      }\n    `,\n  ];\n\n  /**\n   * The slug of the topic to display\n   */\n  @property({ type: String })\n  slug = '';\n\n  /**\n   * Maximum number of talks to display\n   */\n  @property({ type: Number })\n  limit = 5;\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.slug) {\n      this.fetchData();\n    }\n  }\n\n  updated(changedProperties: Map<string, unknown>) {\n    super.updated(changedProperties);\n    if (changedProperties.has('slug') && this.slug) {\n      this.fetchData();\n    }\n  }\n\n  protected async fetchData(): Promise<void> {\n    if (!this.slug || !this.api) return;\n\n    this.loadingState = 'loading';\n    this.error = null;\n\n    try {\n      this.data = await this.api.getTopic(this.slug);\n      this.loadingState = 'success';\n    } catch (err) {\n      const message = err instanceof Error ? err.message : '';\n      if (message === 'Not found') {\n        this.error = `Topic \"${this.slug}\" not found`;\n      } else {\n        this.error = 'Failed to load topic';\n      }\n      this.loadingState = 'error';\n    }\n  }\n\n  protected renderContent(): TemplateResult {\n    if (!this.data) {\n      return html``;\n    }\n\n    const topic = this.data;\n    const talks = topic.talks.slice(0, this.limit);\n    const hasMore = topic.talks_count > talks.length;\n\n    return html`\n      <div class=\"topic-container card\">\n        <div class=\"topic-header\">\n          <h3 class=\"topic-title\">\n            <a href=\"${topic.url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n              ${topic.name}\n            </a>\n          </h3>\n          <div class=\"topic-meta\">\n            <span class=\"badge\">${topic.talks_count} talks</span>\n          </div>\n          ${topic.description\n            ? html`<p class=\"topic-description line-clamp-2\">\n                ${topic.description}\n              </p>`\n            : ''}\n        </div>\n\n        <div class=\"tab-container\">\n          ${talks.length > 0\n            ? html`\n                <div class=\"list\">\n                  ${talks.map(talk => this.renderTalk(talk))}\n                </div>\n                ${hasMore\n                  ? html`\n                      <a\n                        href=\"${topic.url}\"\n                        class=\"view-all-card\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        View all ${topic.talks_count} talks on RubyEvents\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                          <path fill-rule=\"evenodd\" d=\"M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z\" clip-rule=\"evenodd\" />\n                        </svg>\n                      </a>\n                    `\n                  : ''}\n              `\n            : html`\n                <div class=\"empty-state\">\n                  <p>No talks found for this topic.</p>\n                </div>\n              `}\n          ${this.renderFooter()}\n        </div>\n      </div>\n    `;\n  }\n\n  private renderTalk(talk: TopicTalk): TemplateResult {\n    const speakerNames = talk.speakers.map(s => s.name).join(', ');\n\n    return html`\n      <a\n        href=\"${talk.url}\"\n        class=\"list-item talk-item\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        ${talk.thumbnail_url\n          ? html`<img\n              class=\"talk-thumbnail\"\n              src=\"${talk.thumbnail_url}\"\n              alt=\"${talk.title}\"\n              loading=\"lazy\"\n            />`\n          : html`<div class=\"talk-thumbnail skeleton\"></div>`}\n        <div class=\"list-item-content\">\n          <h4 class=\"list-item-title line-clamp-2\">${talk.title}</h4>\n          <p class=\"list-item-subtitle\">\n            ${speakerNames}${talk.event ? ` Â· ${talk.event.name}` : ''}\n          </p>\n        </div>\n      </a>\n    `;\n  }\n\n  protected renderLoading(): TemplateResult {\n    return html`\n      <div class=\"topic-container card\">\n        <div class=\"topic-header\">\n          <div class=\"skeleton skeleton-text\" style=\"width: 60%\"></div>\n          <div class=\"skeleton skeleton-text\" style=\"width: 80px\"></div>\n        </div>\n        <div class=\"tab-container\">\n          <div class=\"list\">\n            ${[1, 2, 3].map(\n              () => html`\n                <div class=\"list-item talk-item\">\n                  <div class=\"talk-thumbnail skeleton\"></div>\n                  <div class=\"list-item-content\">\n                    <div class=\"skeleton skeleton-text\" style=\"width: 90%\"></div>\n                    <div class=\"skeleton skeleton-text\" style=\"width: 60%\"></div>\n                  </div>\n                </div>\n              `\n            )}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rubyevents-topic': RubyeventsTopic;\n  }\n}\n"]}