{"version":3,"file":"slugs.js","sourceRoot":"","sources":["../../stories/slugs.ts"],"names":[],"mappings":"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","sourcesContent":["// Dynamic slug fetching for Storybook controls\n\n// Automatically use rubyevents.org when not on localhost\nexport function getBaseUrl(): string {\n  if (typeof window !== 'undefined') {\n    const hostname = window.location.hostname;\n    if (hostname === 'localhost' || hostname === '127.0.0.1') {\n      return 'http://localhost:3000';\n    }\n  }\n  return 'https://www.rubyevents.org';\n}\n\nconst BASE_URL = getBaseUrl();\n\ninterface SlugResponse {\n  slugs: string[];\n}\n\nasync function fetchSlugs(endpoint: string): Promise<string[]> {\n  try {\n    const response = await fetch(`${BASE_URL}/api/v1/embed/${endpoint}`);\n    if (!response.ok) {\n      console.warn(`Failed to fetch ${endpoint} slugs:`, response.status);\n      return [];\n    }\n    const data: SlugResponse = await response.json();\n    return data.slugs || [];\n  } catch (error) {\n    console.warn(`Failed to fetch ${endpoint} slugs:`, error);\n    return [];\n  }\n}\n\n// Cache for loaded slugs\nlet talkSlugs: string[] | null = null;\nlet eventSlugs: string[] | null = null;\nlet speakerSlugs: string[] | null = null;\nlet userSlugs: string[] | null = null;\n\nexport async function getTalkSlugs(): Promise<string[]> {\n  if (talkSlugs === null) {\n    talkSlugs = await fetchSlugs('talks');\n  }\n  return talkSlugs;\n}\n\nexport async function getEventSlugs(): Promise<string[]> {\n  if (eventSlugs === null) {\n    eventSlugs = await fetchSlugs('events?slugs_only=true');\n  }\n  return eventSlugs;\n}\n\nexport async function getSpeakerSlugs(): Promise<string[]> {\n  if (speakerSlugs === null) {\n    speakerSlugs = await fetchSlugs('speakers');\n  }\n  return speakerSlugs;\n}\n\nexport async function getUserSlugs(): Promise<string[]> {\n  if (userSlugs === null) {\n    userSlugs = await fetchSlugs('profiles');\n  }\n  return userSlugs;\n}\n\n// Fallback slugs in case API is not available\nexport const FALLBACK_TALK_SLUGS = [\n  'keynote-rubyllm',\n  'opening-keynote-rails-world-2024',\n];\n\nexport const FALLBACK_EVENT_SLUGS = [\n  'sfruby-2025',\n  'rails-world-2024',\n  'railsconf-2024',\n];\n\nexport const FALLBACK_SPEAKER_SLUGS = [\n  'tenderlove',\n  'matz',\n];\n\nexport const FALLBACK_USER_SLUGS = [\n  'marcoroth',\n  'chaelcodes',\n];\n\nexport const FALLBACK_TOPIC_SLUGS = [\n  'truffleruby',\n  'ruby-on-rails',\n  'hotwire',\n  'testing',\n];\n\n// Initialize and export promises for preloading\nexport const slugsPromise = Promise.all([\n  getTalkSlugs(),\n  getEventSlugs(),\n  getSpeakerSlugs(),\n  getUserSlugs(),\n]);\n"]}